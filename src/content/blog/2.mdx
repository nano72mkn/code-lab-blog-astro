---
title: "ReactNativeã®é–‹ç™ºç’°å¢ƒãƒ¡ãƒ¢ï¼‘ - ESLintç·¨"
published: true
pubDate: "2021-05-07"
tags: ["reactnative", "typescript", "eslint"]
emoji: "ğŸ“±"
---

## ReactNative ã®é–‹ç™ºç’°å¢ƒã‚’ä½œã‚‹ - ESLint ç·¨

æƒ³å®šã¨ã—ã¦ã¯ä¸‹è¨˜ã‚ã‚Œã°ã„ã„ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ã€‚

- Expo
- TypeScript
- ESLint
- Prettier
- StoryBook
- husky
- lint-staged

### Expo & TypeScript

TypeScript å¯¾å¿œã¯`expo-cli`ã§ init ã™ã‚‹æ™‚ã« TypeScript ã‚’æŒ‡å®šã™ã‚Œã°ãŠ k ãªã®ã§ skip

### ESLint

```
$ npx eslint --init
```

eslint ã®è¨­å®šã‚’é–‹å§‹

```
? How would you like to use ESLint? â€¦
  To check syntax only
  To check syntax and find problems
â¯ To check syntax, find problems, and enforce code style
```

syntax ã¨ã‚³ãƒ¼ãƒ‰ä¿®æ­£ã—ã¦ãã‚Œã‚‹ã‚„ã¤ãŒä¾¿åˆ©ãªã®ã§ä¸€ç•ªä¸‹ã‚’é¸æŠ

```
? What type of modules does your project use? â€¦
â¯ JavaScript modules (import/export)
  CommonJS (require/exports)
  None of these
```

import/export ã‚’ã¤ã‹ã†ã®ã§ä¸€ç•ªä¸Šã‚’é¸æŠ

```
? Which framework does your project use? â€¦
â¯ React
  Vue.js
  None of these
```

ReactNative ãªã®ã§ä¸€ç•ªä¸Šã‚’é¸æŠ

```
? Does your project use TypeScript? â€º No / Yes
```

TypeScript ä½¿ã†ã®ã§ Yes

```
? Where does your code run? â€¦  (Press <space> to select, <a> to toggle all, <i> to invert selection)
  Browser
âœ” Node
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯å®Ÿè¡Œã—ãªã„ã®ã§ Node ã‚’é¸æŠ

```
? How would you like to define a style for your project? â€¦
  Use a popular style guide
â¯ Answer questions about your style
  Inspect your JavaScript file(s)
```

ã“ã“ã¯è‡ªåˆ†å¥½ã¿ã«èª¿æ•´ã§ãã‚‹`Answer questions about your style`ã‚’é¸æŠã€‚

```
? What format do you want your config file to be in? â€¦
â¯ JavaScript
  YAML
  JSON
```

ã„ã¾ã¾ã§ã¯`.eslintrc`ã‚’ä½¿ã£ã¦ã„ãŸã®ã§ã™ãŒã€æ‹¡å¼µãªã—ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã¯éæ¨å¥¨ã«ãªã£ã¦ã„ãŸã®ã§ã¡ã‚‡ã„æ‚©ã¿ã€‚
è»½ãã¿ã¦ãŸã‚‰`JavaScript`ãŒå¤šæ•°ã ã£ãŸã®ã§ã„ã£ãŸã‚“`JavaScript`ã§é€²ã‚ã‚‹

```
? What style of indentation do you use? â€¦
  Tabs
â¯ Spaces
```

typescript ã®è¦ç´„ã§ã‚¹ãƒšãƒ¼ã‚¹ã¨ãªã£ã¦ã„ã‚‹ã®ã§`Spaces`
TS ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ï¼šhttps://typescript-jp.gitbook.io/deep-dive/styleguide#supsu

```
? What quotes do you use for strings? â€¦
  Double
â¯ Single
```

ã“ã¡ã‚‰ã‚‚è¦ç´„ã§`Single`ãªã®ã§`Single`
TS ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ï¼šhttps://typescript-jp.gitbook.io/deep-dive/styleguide#yin-yong-fu

```
? What line endings do you use? â€¦
â¯ Unix
  Windows
```

Mac ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§`Unix`ã‚’é¸æŠã€‚

```
? Do you require semicolons? â€º No / Yes
```

è¦ç´„ã§ã‚»ãƒŸã‚³ãƒ­ãƒ³ä½¿ãˆã¨ã‚ã‚‹ã®ã§ã€ã¾ã‚ˆã‚ãš Yes
TS ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ï¼šhttps://typescript-jp.gitbook.io/deep-dive/styleguide#semikoron

```
âœ” How would you like to use ESLint? Â· style
âœ” What type of modules does your project use? Â· esm
âœ” Which framework does your project use? Â· react
âœ” Does your project use TypeScript? Â·    / Yes
âœ” Where does your code run? Â· node
âœ” How would you like to define a style for your project? Â· prompt
âœ” What format do you want your config file to be in? Â· JavaScript
âœ” What style of indentation do you use? Â· 4
âœ” What quotes do you use for strings? Â· single
âœ” What line endings do you use? Â· unix
âœ” Do you require semicolons? Â·    / Yes
```

æœ€çµ‚çš„ã«ã¯ã“ã‚“ãªæ„Ÿã˜ã€‚

```
Warning: React version not specified in eslint-plugin-react settings. See https://github.com/yannickcr/eslint-plugin-react#configuration .
```

console ã«ä¸Šè¨˜ã®ãƒ¯ãƒ¼ãƒ‹ãƒ³ã‚°ãŒå‡ºã¦ã„ã‚‹ã®ã§æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã§ç›´ã—ã¾ã™ã€‚

#### .eslintrc.js ã‚’ä¿®æ­£

- ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆãŒå‹æ‰‹ã« 4 ã«æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ 2 ã«ç›´ã™

```javascript
module.exports = {
  env: {
    es2020: true,
    node: true,
  },
  extends: [
    "eslint:recommended",
    "plugin:react/recommended",
    "plugin:@typescript-eslint/recommended",
  ],
  parser: "@typescript-eslint/parser",
  parserOptions: {
    ecmaFeatures: {
      jsx: true,
    },
    ecmaVersion: 11,
    sourceType: "module",
  },
  plugins: ["react", "@typescript-eslint"],
  rules: {
    indent: ["error", -4 + 2],
    "linebreak-style": ["error", "unix"],
    quotes: ["error", "single"],
    semi: ["error", "always"],
  },
};
```

### hooks ã® eslint è¨­å®š

ã“ã„ã¤ã‚’ã„ã‚Œã¦ã¿ã‚‹ï¼
https://ja.reactjs.org/docs/hooks-rules.html#eslint-plugin

#### eslint-plugin-react-hooks ã‚’è¿½åŠ 

Expo ãŒæ¨™æº–ã§ yarn ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ yarn ã§ã€‚

```
$ yarn add -D eslint-plugin-react-hooks
```

#### .eslintrc.js ã‚’ã¾ãŸä¿®æ­£

```javascript
module.exports = {
  'env': {
    'es2020': true,
    'node': true
  },
  'extends': [
    'eslint:recommended',
    'plugin:react/recommended',
    'plugin:@typescript-eslint/recommended'
  ],
  'parser': '@typescript-eslint/parser',
  'parserOptions': {
    'ecmaFeatures': {
      'jsx': true
    },
    'ecmaVersion': 11,
    'sourceType': 'module'
  },
  'plugins': [
    'react',
    '@typescript-eslint',
+    'react-hooks'
  ],
  'rules': {
    'indent': [
      'error',
      2
    ],
    'linebreak-style': [
      'error',
      'unix'
    ],
    'quotes': [
      'error',
      'single'
    ],
    'semi': [
      'error',
      'always'
    ],
+    'react-hooks/rules-of-hooks': 'error',
+    'react-hooks/exhaustive-deps': 'warn'
  }
};

```

## ãŠã‚ã‚Š

ã“ã‚Œã§ eslnt ã®è¨­å®šã¯ã„ã£ãŸã‚“çµ‚äº†ã€‚
æ¬¡ã« Pretter ã®è¨­å®šã‚’ã—ã¾ã™

## ç›®æ¬¡

é•·ã„ã®ã§ã€åˆ†ã‘ã‚‹

- ESLint ï¼ˆã“ã®è¨˜äº‹ï¼‰
- [Prettier](/blog/4)
- StoryBook
- husky
- lint-staged
