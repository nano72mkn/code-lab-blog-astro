---
import OgpCard from "../OgpCard.astro";
import { Tweet } from "../Tweet";

const { href } = Astro.props;

const isAnkerLink = /^#/.test(href);

let component = "default";

const isExternalLink = /^http/.test(href);
const url = isExternalLink ? new URL(href) : undefined;

switch (url?.host) {
  case "twitter.com":
    component = "twitter";
    break;
  default:
    component = isAnkerLink ? "default" : "ogp";
    break;
}
---

{component === "twitter" && <Tweet href={href} />}
{component === "ogp" && <OgpCard href={href} />}
{component === "default" && <a href={href}>{href}</a>}
